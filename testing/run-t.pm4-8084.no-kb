#!/bin/bash

# Run the test set for each language with the server default KB
# Jonathan Gordon, 2014-10-17

export IDENTIFIER=$RANDOM

./test -d -l en -i $IDENTIFIER \
    -u http://colo-pm4.isi.edu:8084 \
    data/en.test.tsv > en-t.pm4-8084.no-kb.$IDENTIFIER.txt &
./test -d -l es -i $IDENTIFIER \
    -u http://colo-pm4.isi.edu:8084 \
    data/es.test.tsv > es-t.pm4-8084.no-kb.$IDENTIFIER.txt &
./test -d -l fa -i $IDENTIFIER \
    -u http://colo-pm4.isi.edu:8084 \
    data/fa.test.tsv > fa-t.pm4-8084.no-kb.$IDENTIFIER.txt &
./test -d -l ru -i $IDENTIFIER \
    -u http://colo-pm4.isi.edu:8084 \
    data/ru.test.tsv > ru-t.pm4-8084.no-kb.$IDENTIFIER.txt &

for job in `jobs -p`; do
    wait $job || echo "Failed: $job."
    echo $job
done

echo "Done."
